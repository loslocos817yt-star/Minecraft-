<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coffi's store</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #121212;
            color: #e8eaed;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* Barra superior */
        header {
            width: 100%;
            max-width: 500px;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            background-color: #121212;
            z-index: 10;
        }

        .logo {
            font-size: 1.4rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo span { color: #01875f; font-size: 1.6rem; }

        /* Contenedor de las tarjetas */
        .container {
            width: 100%;
            max-width: 500px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Dise√±o de la Tarjeta */
        .card {
            background-color: #1e1e1e;
            border-radius: 16px;
            padding: 20px;
            border: 1px solid #333;
            box-shadow: 0 4px 12px rgba(0,0,0,0.5);
            transition: transform 0.1s;
        }

        .card:active { transform: scale(0.98); }

        .app-header {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .app-icon {
            width: 72px;
            height: 72px;
            background: linear-gradient(135deg, #34a853, #188038);
            border-radius: 18px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 38px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .app-info {
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .app-info h2 {
            font-size: 1.1rem;
            font-weight: 500;
            color: #fff;
            margin-bottom: 4px;
        }

        .app-info p {
            color: #01875f;
            font-weight: 700;
            font-size: 0.85rem;
            text-transform: uppercase;
        }

        /* Bot√≥n de Instalar */
        .btn-install {
            display: block;
            width: 100%;
            background-color: #01875f;
            color: white;
            text-align: center;
            padding: 12px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 700;
            font-size: 0.95rem;
            transition: background 0.3s;
        }

        .btn-install:hover { background-color: #00704e; }

        /* Pantallas de estado */
        .status-msg {
            text-align: center;
            margin-top: 100px;
            padding: 20px;
        }

        .status-msg .icon { font-size: 60px; margin-bottom: 15px; }

        .loader {
            border: 4px solid #333;
            border-top: 4px solid #01875f;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .btn-retry {
            background: transparent;
            border: 1px solid #8ab4f8;
            color: #8ab4f8;
            padding: 10px 20px;
            border-radius: 5px;
            margin-top: 15px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <header>
        <div class="logo"><span>üóø</span> Coffi's store</div>
        <div style="background:#3c4043; width:32px; height:32px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:14px;">L</div>
    </header>

    <div class="container" id="tienda">
        <div class="status-msg" id="loading">
            <div class="loader"></div>
            <p>Buscando actualizaciones...</p>
        </div>
    </div>

    <script>
        // URL de tu JSON en GitHub
        const urlRaw = "https://raw.githubusercontent.com/loslocos817yt-star/Minecraft-/main/Link.json?v=" + Date.now();

        async function cargarTienda() {
            const container = document.getElementById('tienda');
            
            try {
                const response = await fetch(urlRaw);
                if (!response.ok) throw new Error("Error al conectar");

                const datos = await response.json();
                
                // Asegurarnos de que datos sea una lista
                const listaJuegos = Array.isArray(datos) ? datos : [datos];
                
                // Limpiar el contenedor
                container.innerHTML = "";

                listaJuegos.forEach(juego => {
                    // VALIDACI√ìN CR√çTICA: Si el objeto est√° vac√≠o o no tiene link, lo ignora
                    if (!juego || !juego.link || typeof juego.link !== 'string') return;

                    // Intentar extraer la ID de Google Drive
                    const matchID = juego.link.match(/\/d\/([a-zA-Z0-9_-]+)/);
                    
                    if (matchID && matchID[1]) {
                        const id = matchID[1];
                        const linkDirecto = `https://drive.google.com/uc?export=download&id=${id}`;

                        // Crear la tarjeta
                        const card = document.createElement('div');
                        card.className = 'card';
                        card.innerHTML = `
                            <div class="app-header">
                                <div class="app-icon">üßä</div>
                                <div class="app-info">
                                    <h2>${juego.name || "Minecraft Version"}</h2>
                                    <p>Oficial ‚Ä¢ Gratis</p>
                                </div>
                            </div>
                            <a href="${linkDirecto}" class="btn-install">Instalar</a>
                        `;
                        container.appendChild(card);
                    }
                });

                // Si despu√©s de procesar todo no hay nada, lanzamos error
                if (container.innerHTML === "") {
                    throw new Error("No se encontraron enlaces v√°lidos");
                }

            } catch (error) {
                console.error("Error:", error);
                container.innerHTML = `
                    <div class="status-msg">
                        <div class="icon">üõ∞Ô∏è</div>
                        <h2>No se pudieron cargar los juegos</h2>
                        <p>Revisa tu conexi√≥n o el archivo Link.json</p>
                        <button class="btn-retry" onclick="location.reload()">REINTENTAR</button>
                    </div>
                `;
            }
        }

        // Ejecutar al cargar la p√°gina
        window.onload = cargarTienda;
    </script>
</body>
</html>
